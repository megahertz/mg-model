"use strict";!function(){function t(t,e){var r=n();return r.$collection=o(r,t,e),r}function e(t){function e(){o.apply(this,arguments)}var n=this.$collection,o=this;t.$collection&&(n=t.$collection,delete t.$collection);var r=t.constructor===Object?e:t.constructor;return r.prototype=Object.create(this.prototype),angular.extend(r,this),angular.extend(r.prototype,t),r.prototype.constructor=r,n&&(n.$model=r,r.$collection=n),r}function n(){function t(t){angular.extend(this,t)}return t.prototype.getIdField=function(){return"id"},t.prototype.getId=function(){return this[this.getIdField()]},t.extend=e,t}function o(t,n,o){function r(e){if(e){if(!(e instanceof Array))throw"Collection accepts only Array";var n=this.constructor.$model||t;this.push.apply(this,e.map(function(t){return new n(t)}))}}return r.prototype=Object.create(Array.prototype),r.prototype.filterExp=function(t,e){var n=o(t),r=this.filter(function(t){return angular.isObject(e)||(e={value:e}),e.$model=t,n(e)});return new this.constructor(r)},r.prototype.oneExp=function(t,e){return this.filterExp(t,e)[0]},r.load=function(t){var e=this,o=t.then?t:n.when(t);return o.then(function(t){return new e(t)})},r.extend=e,r.$model=t,r}t.$inject=["$q","$parse"],angular.module("mgmodel",[]).factory("mgModel",t)}();